<!doctype html>
<html>
<head>
  <title>Test UniqueIdHandler</title>
</head>
<body>
  <h1>Test UniqueIdHandler</h1>
  <div id="output"></div>

  <script>
    var Module = {
      onRuntimeInitialized: function() {
        console.log('Module chargé:', Module);

        // Créer une instance avec un machine_id
        var uniqueIdHandler = new Module.UniqueIdHandler("abc");

        // Générer un ID
        var id = uniqueIdHandler.ComposeUniqueId();

        console.log('ID généré:', id);

        // Afficher dans la page
        document.getElementById('output').innerHTML = '<h2>ID généré: ' + id + '</h2>';

        var mediaHandler = new Module.MediaHandler();
        testStringList = new Module.StringList();
        testStringList.push_back("testaa");

        testIntList = new Module.IntList();
        testIntList.push_back(1);

        const testStringMapMAp = new Module.StringStringMap();
        testStringMapMAp.set("testaa", "testaa");
        var mediaList = mediaHandler.ComposeMedia(1, testStringList, testIntList, testStringMapMAp);
        console.log(mediaList)
        console.log(mediaList.get(0).media_type)
        console.log(mediaList.get(0).media_id)


        // Test user handler

        var socialGraphHandler = new Module.SocialGraphHandler();
        var userHandler = new Module.UserHandler(socialGraphHandler, uniqueIdHandler);

        userHandler.RegisterUserWithId("fouéré", "nathan", "gourcuffdu14", "101214", 55);
        userHandler.RegisterUser("fouéré", "nathan", "gourcuffdu14", "101214");
        userHandler.ComposeCreatorWithUsername("gourcuffdu14");
        userHandler.ComposeCreatorWithUserId(55, "gourcuffdu14");
        userHandler.Login("gourcuffdu14", "101214");
        userHandler.GetUserId("gourcuffdu14");
      }
    };
  </script>
  <script src="convertedMicroServices.js"></script>
</body>
</html>
